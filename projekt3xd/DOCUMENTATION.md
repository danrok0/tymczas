# System Rekomendacji Szlak√≥w Turystycznych - Dokumentacja

## 1. G≈Ç√≥wne Komponenty Systemu

### 1.1 Obliczanie Komfortu Wƒôdr√≥wki
System wykorzystuje z≈Ço≈ºony algorytm do obliczania indeksu komfortu (0-100) dla ka≈ºdej trasy:

1. Kalkulacja temperatury (40% wagi ko≈Ñcowej):
   - Temperatura idealna: 15-18¬∞C = 100 punkt√≥w
   - Poni≈ºej 15¬∞C: -15 punkt√≥w za ka≈ºdy stopie≈Ñ
   - Powy≈ºej 18¬∞C: -18 punkt√≥w za ka≈ºdy stopie≈Ñ
   - Przyk≈Çad: 20¬∞C = 100 - (20-18)*18 = 64 punkt√≥w

2. Kalkulacja opad√≥w (35% wagi ko≈Ñcowej):
   - Brak opad√≥w = 100 punkt√≥w
   - Ka≈ºdy mm opad√≥w = -40 punkt√≥w
   - Przyk≈Çad: 2mm opad√≥w = 100 - (2*40) = 20 punkt√≥w

3. Kalkulacja zachmurzenia (25% wagi ko≈Ñcowej):
   - 20-40% zachmurzenia = 100 punkt√≥w
   - 0-20% = 80 punkt√≥w (mo≈ºliwe za du≈ºe nas≈Çonecznienie)
   - 40-60% = 60 punkt√≥w
   - >60% = liniowy spadek (2 punkty za ka≈ºdy % powy≈ºej 60)

Finalna warto≈õƒá to ≈õrednia wa≈ºona powy≈ºszych komponent√≥w.
Lokalizacja kodu: `utils/weather_utils.py -> WeatherUtils.calculate_hiking_comfort()`

### 1.2 System Oceny i Wagi
- Temperatura (40% wagi)
  - Optymalna temperatura: 15-18¬∞C
  - Punktacja maleje przy odchyleniach od zakresu optymalnego
  
- Opady (35% wagi)
  - Im ni≈ºsze opady, tym wy≈ºsza ocena
  - Uwzglƒôdniane sƒÖ zar√≥wno opady aktualne jak i prognozowane
  
- Zachmurzenie (25% wagi)
  - Optymalne zachmurzenie: 20-40%
  - Zapewnia balans miƒôdzy ochronƒÖ przed s≈Ço≈Ñcem a dobrƒÖ widoczno≈õciƒÖ

### 1.2 Modyfikatory Terenowe
Indeks jest modyfikowany w zale≈ºno≈õci od typu terenu:
- Teren g√≥rski: 
  - Temperatura obni≈ºana o 0.6¬∞C na ka≈ºde 100m wysoko≈õci
  - Opady zwiƒôkszane o 20%
  
## 9. System Wag i Obliczanie Wynik√≥w (ZAKTUALIZOWANY)

### 9.1 Domy≈õlne Wagi Kryteri√≥w i Ich Dzia≈Çanie
System wykorzystuje nastƒôpujƒÖcy rozk≈Çad wag przy ocenie tras:

1. **D≈Çugo≈õƒá trasy (25% wagi ko≈Ñcowej)** - ZAKTUALIZOWANE:
   - Bazowa waga: 0.25 (zmieniono z 0.30)
   - Spos√≥b obliczania:
     * Dla ka≈ºdej trasy obliczana jest odleg≈Ço≈õƒá od optymalnego zakresu (5-15 km)
     * Je≈õli trasa mie≈õci siƒô w zakresie: 100 punkt√≥w
     * Za ka≈ºdy km poni≈ºej 5km: -5 punkt√≥w
     * Za ka≈ºdy km powy≈ºej 15km: -5 punkt√≥w
     * Przyk≈Çad: trasa 18km = 100 - (18-15)*5 = 85 punkt√≥w
   - Lokalizacja: `utils/weight_calculator.py -> calculate_length_score()`

2. **Trudno≈õƒá (25% wagi ko≈Ñcowej)**:
   - Bazowa waga: 0.25
   - Spos√≥b obliczania:
     * Poziom 1 (≈Çatwy) = 100 punkt√≥w
     * Poziom 2 (≈õredni) = 66.66 punkt√≥w
     * Poziom 3 (trudny) = 33.33 punkt√≥w
     * Dodatkowe modyfikatory:
       - Przewy≈ºszenie > 500m: -10 punkt√≥w
       - Przewy≈ºszenie > 1000m: -20 punkt√≥w
   - Lokalizacja: `utils/weight_calculator.py -> calculate_difficulty_score()`

3. **Warunki pogodowe (25% wagi ko≈Ñcowej)**:
   - Bazowa waga: 0.25
   - Wykorzystuje indeks komfortu (0-100)
   - Dodatkowe modyfikatory:
     * Deszczowy dzie≈Ñ: -30 punkt√≥w
     * Silny wiatr (>20 km/h): -20 punkt√≥w
   - Lokalizacja: `utils/weather_utils.py -> calculate_hiking_comfort()`

4. **Typ terenu (25% wagi ko≈Ñcowej)** - ZAKTUALIZOWANE:
   - Bazowa waga: 0.25 (zmieniono z 0.20)
   - Punktacja bazowa:
     * G√≥rski: 90 punkt√≥w
     * Le≈õny: 85 punkt√≥w
     * Mieszany: 80 punkt√≥w
     * Nadrzeczny: 75 punkt√≥w
     * Miejski: 70 punkt√≥w
   - Modyfikatory:
     * Punkty widokowe: +10 punkt√≥w
     * Atrakcje turystyczne: +5 punkt√≥w ka≈ºda
   - Lokalizacja: `utils/weight_calculator.py -> calculate_terrain_score()`

### 9.2 üÜï NOWY System Ustawiania Wag
**WA≈ªNE**: System wag zosta≈Ç ca≈Çkowicie przeprojektowany!

**Stary problem**: System pyta≈Ç o wagi dla ka≈ºdego miasta osobno
**Nowe rozwiƒÖzanie**: Wagi ustawiane JEDEN RAZ na poczƒÖtku

**Nowe funkcje**:
- Obs≈Çuga pustych warto≈õci (ENTER = domy≈õlne)
- Mo≈ºliwo≈õƒá czƒô≈õciowego wype≈Çnienia
- Automatyczna normalizacja do sumy 100%
- Walidacja poprawno≈õci danych
- Lepsze komunikaty u≈ºytkownika

### 2.2 Sk≈Çadowe Oceny Wa≈ºonej
1. D≈Çugo≈õƒá (normalizowana do 0-100)
   - Optymalna d≈Çugo≈õƒá: 5-15 km (100 punkt√≥w)
   - Punktacja maleje o 5 punkt√≥w na ka≈ºdy kilometr odchylenia

2. Trudno≈õƒá (skala 0-100)
   - Poziom 1: 100 punkt√≥w
   - Poziom 2: 66.66 punkt√≥w
   - Poziom 3: 33.33 punkt√≥w

3. Warunki pogodowe
   - Wykorzystuje indeks komfortu (0-100)

4. Typ terenu (ocena bazowa)
   - G√≥rski: 90 punkt√≥w
   - Le≈õny: 85 punkt√≥w
   - Mieszany: 80 punkt√≥w
   - Nadrzeczny: 75 punkt√≥w
   - Miejski: 70 punkt√≥w

## 10. Kategoryzacja Tras i Algorytmy Klasyfikacji (ZAKTUALIZOWANE)

### 10.1 üÜï Automatyczna Kategoryzacja Tras
**Lokalizacja**: `recommendation/trail_recommender.py -> _categorize_trail()`

System automatycznie kategoryzuje trasy na podstawie inteligentnego algorytmu:

1. **Trasy Rodzinne**:
   - **Podstawowe kryteria** (wszystkie wymagane):
     * Trudno≈õƒá: poziom 1 (≈Çatwy)
     * D≈Çugo≈õƒá: < 5 km
     * Przewy≈ºszenie: < 200m
   - **Dodatkowe wska≈∫niki**:
     * Tagi: leisure, park, playground, family
     * S≈Çowa kluczowe: "rodzin", "≈Çatw", "spokojna", "dziec"
   - **Priorytet**: Najwy≈ºszy (sprawdzane jako pierwsze)

2. **Trasy Widokowe**:
   - **Podstawowe kryteria**:
     * D≈Çugo≈õƒá: < 15 km (nie za d≈Çugie)
     * Obecno≈õƒá punkt√≥w widokowych
   - **Wska≈∫niki**:
     * Tagi: viewpoint, scenic, tourism, view_point, panorama
     * S≈Çowa kluczowe: "widok", "panoram", "scenic", "krajobraz", "punkt widokowy"
   - **Priorytet**: Drugi (po rodzinnych)

3. **Trasy Ekstremalne**:
   - **Kryteria** (jedno wystarczy):
     * Trudno≈õƒá: poziom 3 (trudny)
     * D≈Çugo≈õƒá: > 15 km
     * Przewy≈ºszenie: > 800m
   - **Wska≈∫niki**:
     * Tagi: climbing, alpine, via_ferrata, extreme
     * S≈Çowa kluczowe: "ekstre", "trudna", "wymagajƒÖc", "alpejsk"
   - **Priorytet**: Trzeci

4. **Trasy Sportowe**:
   - **Kryteria**:
     * Trudno≈õƒá: poziom 2 AND d≈Çugo≈õƒá 5-15 km
     * LUB s≈Çowa kluczowe sportowe
   - **Wska≈∫niki**:
     * S≈Çowa kluczowe: "sport", "aktyw", "kondycyj", "wysi≈Çk"
   - **Priorytet**: Czwarty

5. **Algorytm Fallback**:
   - Je≈õli trasa nie pasuje do ≈ºadnej kategorii:
     * D≈Çugo≈õƒá < 5km ‚Üí rodzinna
     * D≈Çugo≈õƒá > 15km OR trudno≈õƒá 3 ‚Üí ekstremalna  
     * Trudno≈õƒá 2 OR d≈Çugo≈õƒá 5-15km ‚Üí sportowa
     * W ostateczno≈õci ‚Üí widokowa (najbezpieczniejsza opcja)

## 11. üÜï Obliczanie Czasu Przej≈õcia (ZAKTUALIZOWANE)

### 11.1 Nowy Algorytm Obliczania Czasu
**Lokalizacja**: `recommendation/trail_recommender.py -> _calculate_trail_time()`

**Wz√≥r**: `Czas = D≈Çugo≈õƒá √ó Mno≈ºnik_Trudno≈õci √ó Mno≈ºnik_Terenu`

### 11.2 Parametry Bazowe
- **Bazowa jednostka**: 1 km = 1 godzina bazowego czasu
- **Zakres wynik√≥w**: 0.1 - 20+ godzin
- **Precyzja**: Wynik zaokrƒÖglany do 0.1 godziny

### 11.3 üÜï Mno≈ºniki Trudno≈õci
1. **Poziom 1 (≈Çatwy)**: 1.0 (bez modyfikacji)
2. **Poziom 2 (≈õredni)**: 1.4 (+40% czasu)
3. **Poziom 3 (trudny)**: 1.8 (+80% czasu)

**Wz√≥r**: `1.0 + (trudno≈õƒá - 1) √ó 0.4`

### 11.4 üÜï Mno≈ºniki Terenowe
1. **Miejski**: 0.8 (najszybszy - chodniki, asfal—Ç)
2. **Nizinny**: 1.0 (bazowy teren)
3. **Nadrzeczny**: 1.1 (lekko trudniejszy)
4. **Le≈õny**: 1.2 (≈õcie≈ºki le≈õne)
5. **Mieszany**: 1.3 (r√≥≈ºnorodny teren)
6. **G√≥rski**: 1.6 (najtrudniejszy - stromizny, kamienie)

### 11.5 Przyk≈Çady Oblicze≈Ñ
1. **Trasa rodzinna**: 3 km, trudno≈õƒá 1, teren miejski
   - Czas = 3 √ó 1.0 √ó 0.8 = **2.4 godziny**

2. **Trasa sportowa**: 10 km, trudno≈õƒá 2, teren le≈õny  
   - Czas = 10 √ó 1.4 √ó 1.2 = **16.8 godzin**

3. **Trasa ekstremalna**: 20 km, trudno≈õƒá 3, teren g√≥rski
   - Czas = 20 √ó 1.8 √ó 1.6 = **57.6 godzin**

### 11.6 Wy≈õwietlanie Czasu
System pokazuje czas w formacie:
- **Tylko godziny**: "5h" (dla 5.0h)
- **Godziny i minuty**: "3h 30min" (dla 3.5h)
- **Tylko minuty**: "45min" (dla 0.75h)

## 12. üìö STARE FUNKCJONALNO≈öCI (ZACHOWANE)

### 12.1 Ocena Trudno≈õci Trasy
System ocenia trudno≈õƒá w skali 1-3 na podstawie:

1. **D≈Çugo≈õci**:
   - > 20 km: poziom 3
   - > 10 km: poziom 2  
   - ‚â§ 10 km: poziom 1

2. **Przewy≈ºszenia**:
   - > 1000m: poziom 3
   - > 500m: poziom 2
   - ‚â§ 500m: poziom 1

3. **Skali SAC**:
   - alpine: poziom 3
   - mountain: poziom 2
   - inne: poziom 1

### 12.2 Podstawowe Funkcje Systemu

**Analiza Pogody**:
- `WeatherUtils.is_sunny_day()` - sprawdza s≈Çoneczno≈õƒá
- `WeatherUtils.is_rainy_day()` - sprawdza opady
- `WeatherUtils.calculate_hiking_comfort()` - indeks komfortu

**Operacje na Danych**:
- `TrailDataHandler.load_trails()` - wczytywanie tras
- `ResultExporter` - eksport do CSV/JSON/TXT
- `TrailFilter.filter_trails()` - filtrowanie tras

**Rekomendacje**:
- `TrailRecommender.recommend_trails()` - g≈Ç√≥wny algorytm
- `TrailFilter.sort_trails()` - sortowanie wynik√≥w

## 2. üÜï NOWE FUNKCJONALNO≈öCI - ETAP 3

### 2.1 System Przetwarzania Tekstu (TextProcessor)
**Lokalizacja**: `extractors/text_processor.py`

**Co robi**: Analizuje opisy tras i wydobywa z nich informacje u≈ºywajƒÖc wyra≈ºe≈Ñ regularnych.

**G≈Ç√≥wne funkcje**:
1. **Ekstrakcja czasu przej≈õcia** (`extract_time_info()`):
   - Rozpoznaje formaty: "2h 30min", "150 minut", "2.5 godziny"
   - Wzorce regex: `r'(\d+(?:\.\d+)?)\s*(?:h|godz|hours?)'`, `r'(\d+)\s*(?:min|minut)'`
   - Przyk≈Çad: "Trasa zajmuje oko≈Ço 3h 45min" ‚Üí 3.75 godziny

2. **Identyfikacja punkt√≥w charakterystycznych** (`extract_landmarks()`):
   - Znajduje: schroniska, szczyty, prze≈Çƒôcze, punkty widokowe
   - Wzorce: `r'(schronisko|szczyt|prze≈Çƒôcz|punkt widokowy)'`

3. **Rozpoznawanie ostrze≈ºe≈Ñ** (`extract_warnings()`):
   - Wykrywa: ≈õliskie kamienie, trudne warunki, zagro≈ºenia
   - Wzorce: `r'(uwaga|ostro≈ºnie|niebezpieczne|≈õliskie)'`

**Jak u≈ºywaƒá**:
```python
processor = TextProcessor()
time_info = processor.extract_time_info("Czas przej≈õcia oko≈Ço 2h 30min")
# Wynik: {'hours': 2, 'minutes': 30, 'total_hours': 2.5}
```

### 2.2 System Analizy Recenzji (ReviewAnalyzer)
**Lokalizacja**: `analyzers/review_analyzer.py`

**Co robi**: Analizuje recenzje u≈ºytkownik√≥w i okre≈õla ich sentiment oraz wydobywa informacje.

**G≈Ç√≥wne funkcje**:
1. **Analiza sentymentu** (`analyze_sentiment()`):
   - Okre≈õla czy recenzja jest pozytywna, negatywna czy neutralna
   - S≈Çowa pozytywne: "wspania≈Çy", "piƒôkny", "polecam", "≈õwietny"
   - S≈Çowa negatywne: "trudny", "niebezpieczny", "nie polecam", "problem"
   - Obs≈Çuguje negacjƒô: "nie polecam" = negatywne

2. **Ekstrakcja ocen** (`extract_rating()`):
   - Rozpoznaje formaty: "4.5/5", "8/10", "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ"
   - Normalizuje do skali 1-5

3. **Identyfikacja aspekt√≥w** (`extract_aspects()`):
   - Wykrywa tematy: widoki, trudno≈õƒá, oznakowanie, dojazd
   - Przyk≈Çad: "Piƒôkne widoki ale trudne oznakowanie" ‚Üí ['widoki', 'oznakowanie']

4. **Analiza sezonowo≈õci** (`extract_season()`):
   - Rozpoznaje: "wiosnƒÖ", "latem", "jesieniƒÖ", "zimƒÖ"

**Gdzie zobaczyƒá wyniki**:
- **Opcja 3** w menu g≈Ç√≥wnym: "Analiza konkretnej trasy"
- Ka≈ºda recenzja pokazuje: üìä Sentiment: üòä Pozytywna/üòû Negatywna/üòê Neutralna

### 2.3 System Generowania Recenzji
**Lokalizacja**: `data_handlers/trail_data.py -> _generate_sample_reviews()`

**Co robi**: Automatycznie generuje r√≥≈ºnorodne, realistyczne recenzje dla tras.

**Typy recenzji**:
1. **Pozytywne (60% szans)**: "Fantastyczna trasa!", "Wspania≈Çe widoki!"
2. **Neutralne (25% szans)**: "Trasa w porzƒÖdku", "Przeciƒôtna trasa"
3. **Negatywne (15% szans)**: "Rozczarowanie", "≈πle oznakowana"
4. **Specyficzne dla trudno≈õci**: R√≥≈ºne opinie dla ≈Çatwych/trudnych tras
5. **Specyficzne dla terenu**: G√≥ry, las, miasto - r√≥≈ºne komentarze
6. **Sezonowe**: Opinie zwiƒÖzane z porami roku

**Przyk≈Çad wygenerowanych recenzji**:
```
1. Fantastyczna trasa! Szlak zachwyca na ka≈ºdym kroku. 5/5
   üìä Sentiment: üòä Pozytywna
   ‚≠ê Ocena: 5.0/5
   üîë Aspekty: widoki

2. Trasa w porzƒÖdku, oznakowanie mog≈Çoby byƒá lepsze. 3/5
   üìä Sentiment: üòê Neutralna
   ‚≠ê Ocena: 3.0/5
   üîë Aspekty: oznakowanie
```

### 2.4 System Raport√≥w PDF
**Lokalizacja**: `reporters/pdf_report_generator.py`

**Co robi**: Generuje profesjonalne raporty PDF z rekomendacjami tras.

**Zawarto≈õƒá raportu**:
1. **Strona tytu≈Çowa**: Data, parametry wyszukiwania
2. **Podsumowanie wykonawcze**: Najwa≈ºniejsze wnioski
3. **Szczeg√≥≈Çowe opisy tras**: Z mapami i profilami
4. **Wykresy por√≥wnawcze**: D≈Çugo≈õƒá, oceny, kategorie
5. **Tabela zbiorcza**: Wszystkie parametry tras
6. **Obs≈Çuga polskich znak√≥w**: Fonty Arial, Calibri, DejaVu Sans

**Jak u≈ºywaƒá**:
- **Opcja 2** w menu g≈Ç√≥wnym: "Rekomendacje z raportem PDF"
- System pyta o nazwƒô pliku
- Automatycznie otwiera wygenerowany PDF

### 2.5 System Wykres√≥w i Wizualizacji
**Lokalizacja**: `reporters/chart_generator.py`

**Co robi**: Tworzy wykresy do raport√≥w PDF i analizy danych.

**Typy wykres√≥w**:
1. **Histogram d≈Çugo≈õci tras**: Rozk≈Çad d≈Çugo≈õci wszystkich tras
2. **Wykres ko≈Çowy kategorii**: Podzia≈Ç na rodzinne/sportowe/ekstremalne
3. **Wykres s≈Çupkowy ocen**: Rozk≈Çad ocen u≈ºytkownik√≥w
4. **Mapa ciep≈Ça sezonowo≈õci**: Popularno≈õƒá tras w r√≥≈ºnych miesiƒÖcach
5. **Wykres radarowy**: Ocena tras pod r√≥≈ºnymi kryteriami

**Funkcje**:
- Automatyczne kolorowanie
- Polskie opisy i etykiety
- Eksport do PNG dla PDF
- Obs≈Çuga r√≥≈ºnych rozmiar√≥w

### 2.6 System Analizy Najlepszych Okres√≥w
**Lokalizacja**: `main.py -> analyze_specific_trail()` (linie 550-620)

**Co robi**: Analizuje dane pogodowe i okre≈õla najlepsze okresy dla wƒôdr√≥wek.

**Algorytm oceny komfortu**:
1. **Temperatura (50% wagi)**:
   - Optymalna: 15-25¬∞C = +30 punkt√≥w
   - Dobra: 10-15¬∞C lub 25-30¬∞C = +20 punkt√≥w
   - Przeciƒôtna: 5-10¬∞C lub 30-35¬∞C = +10 punkt√≥w
   - S≈Çaba: poni≈ºej 5¬∞C lub powy≈ºej 35¬∞C = -10 punkt√≥w

2. **Opady (35% wagi)**:
   - Niskie (<30mm) = +20 punkt√≥w
   - ≈örednie (30-60mm) = +10 punkt√≥w
   - Wysokie (60-100mm) = 0 punkt√≥w
   - Bardzo wysokie (>100mm) = -15 punkt√≥w

3. **S≈Ço≈Ñce (15% wagi)**:
   - Du≈ºo (>7h) = +15 punkt√≥w
   - ≈örednio (5-7h) = +10 punkt√≥w
   - Ma≈Ço (3-5h) = +5 punkt√≥w

**Wynik**: Ranking 12 miesiƒôcy z indeksem komfortu 0-100

### 2.7 Naprawiony System Wag
**Lokalizacja**: `utils/weight_calculator.py`

**Problem**: System w k√≥≈Çko pyta≈Ç o wagi dla ka≈ºdego miasta
**RozwiƒÖzanie**: Wagi pobierane tylko raz na poczƒÖtku

**Nowe funkcje**:
1. **Obs≈Çuga pustych warto≈õci**: ENTER = domy≈õlne wagi
2. **Czƒô≈õciowe wype≈Çnienie**: Mo≈ºna podaƒá tylko niekt√≥re wagi
3. **Walidacja**: Sprawdza czy suma wag nie jest zerem
4. **Lepsze komunikaty**: Jasne informacje o procesie

**Jak dzia≈Ça teraz**:
```
‚öñÔ∏è === USTAWIENIE WAG KRYTERI√ìW ===
Aktualne wagi kryteri√≥w:
- length: 25%
- difficulty: 25%
- weather: 25%
- terrain: 25%

Podaj nowe wagi (0-100) lub wci≈õnij ENTER dla warto≈õci domy≈õlnych:
Waga d≈Çugo≈õci trasy: [ENTER dla domy≈õlnej]
‚úÖ U≈ºyto domy≈õlnych wag
```

## 3. üîß POPRAWKI I ULEPSZENIA

### 3.1 Naprawione Gwiazdki w PDF
**Problem**: Gwiazdki (‚òÖ) wy≈õwietla≈Çy siƒô jako prostokƒÖty
**RozwiƒÖzanie**: ZastƒÖpiono opisowym tekstem
- `4.2/5 (Bardzo dobra)` zamiast `4.2/5 (****-)`
- Skala: Doskona≈Ça (4.5+), Bardzo dobra (4.0+), Dobra (3.0+), Przeciƒôtna (2.0+), S≈Çaba (<2.0)

### 3.2 Poprawione Preferencje Sezonowe
**Problem**: `Preferencje sezonowe: {'wiosna': 1}` - pokazywa≈Ço liczby
**RozwiƒÖzanie**: `Preferencje sezonowe: wiosna, lato` - tylko nazwy

### 3.3 Naprawiona Analiza B≈Çƒôd√≥w PDF
**Problem**: `cannot access local variable 'avg_rating_str'`
**RozwiƒÖzanie**: Poprawione wciƒôcia w `analyzers/review_analyzer.py`

### 3.4 Usuniƒôte Duplikaty Tras
**Funkcja**: `_remove_duplicates()` w `data_handlers/trail_data.py`
**Kryteria**: Identyczna nazwa, d≈Çugo≈õƒá i region
**Wynik**: System loguje ile duplikat√≥w usunƒÖ≈Ç

## 4. üìç STRUKTURA MENU I OPCJE

### 4.1 Menu G≈Ç√≥wne
```
=== üèîÔ∏è SYSTEM REKOMENDACJI TRAS TURYSTYCZNYCH ===
1. üéØ Standardowe rekomendacje tras
2. üìä Rekomendacje z raportem PDF  
3. üîç Analiza konkretnej trasy
4. üåê Zbieranie danych z internetu
5. üìà Generowanie wykres√≥w
6. üî§ Demonstracja przetwarzania tekstu
7. üö™ Wyj≈õcie
```

### 4.2 Szczeg√≥≈Çowy Opis Opcji

**Opcja 1: Standardowe rekomendacje**
- Wyb√≥r miasta/miast i daty
- Ustawienie kryteri√≥w wyszukiwania
- **NOWE**: Jednorazowe ustawienie wag (nie pyta dla ka≈ºdego miasta)
- Analiza najlepszych okres√≥w z prawdziwymi danymi pogodowymi
- Eksport do CSV/JSON/TXT

**Opcja 2: Rekomendacje z PDF**
- Wszystko jak opcja 1 + generowanie raportu PDF
- Mo≈ºliwo≈õƒá podania w≈Çasnej nazwy pliku
- Automatyczne otwieranie PDF po wygenerowaniu
- **NOWE**: Poprawione gwiazdki i polskie znaki

**Opcja 3: Analiza konkretnej trasy**
- **NAJLEPSZE MIEJSCE DO ZOBACZENIA ANALIZY SENTYMENTU!**
- Wyb√≥r konkretnej trasy z listy
- Szczeg√≥≈Çowa analiza ka≈ºdej recenzji z emoji
- Pe≈Çna analiza najlepszych okres√≥w (12 miesiƒôcy)
- **NOWE**: Pokazuje sentiment ka≈ºdej recenzji osobno

**Opcja 4: Zbieranie danych z internetu**
- Demonstracja WebDataCollector
- Symulacja pobierania danych z portali turystycznych

**Opcja 5: Generowanie wykres√≥w**
- Tworzenie wszystkich typ√≥w wykres√≥w
- Zapisywanie do plik√≥w PNG
- **NOWE**: U≈ºywa headless matplotlib (bez Qt)

**Opcja 6: Demonstracja przetwarzania tekstu**
- Pokazuje dzia≈Çanie TextProcessor
- Przyk≈Çady z updatelist.txt
- Ekstrakcja czasu, punkt√≥w, ostrze≈ºe≈Ñ

## 5. üóÇÔ∏è STRUKTURA PLIK√ìW I PO≈ÅƒÑCZENIA

### 5.1 G≈Ç√≥wne Modu≈Çy
```
projekt3xd/
‚îú‚îÄ‚îÄ main.py                 # Menu g≈Ç√≥wne i logika aplikacji
‚îú‚îÄ‚îÄ analyzers/              # Analiza tekstu i recenzji
‚îÇ   ‚îî‚îÄ‚îÄ review_analyzer.py  # Sentiment, oceny, aspekty
‚îú‚îÄ‚îÄ extractors/             # Przetwarzanie tekstu
‚îÇ   ‚îî‚îÄ‚îÄ text_processor.py   # Regex, ekstrakcja informacji
‚îú‚îÄ‚îÄ reporters/              # Generowanie raport√≥w
‚îÇ   ‚îú‚îÄ‚îÄ pdf_report_generator.py  # Raporty PDF
‚îÇ   ‚îî‚îÄ‚îÄ chart_generator.py       # Wykresy i wizualizacje
‚îú‚îÄ‚îÄ utils/                  # Narzƒôdzia pomocnicze
‚îÇ   ‚îî‚îÄ‚îÄ weight_calculator.py     # System wag (NAPRAWIONY)
‚îî‚îÄ‚îÄ data_handlers/          # Obs≈Çuga danych
    ‚îî‚îÄ‚îÄ trail_data.py       # Generowanie recenzji, duplikaty
```

### 5.2 Przep≈Çyw Danych

**Standardowe rekomendacje**:
1. `main.py` ‚Üí pobiera kryteria od u≈ºytkownika
2. `weight_calculator.py` ‚Üí ustawia wagi JEDEN RAZ
3. `trail_recommender.py` ‚Üí filtruje trasy dla ka≈ºdego miasta
4. `review_analyzer.py` ‚Üí analizuje recenzje
5. `export_results.py` ‚Üí eksportuje wyniki

**Analiza konkretnej trasy**:
1. `main.py` ‚Üí wyb√≥r trasy
2. `trail_data.py` ‚Üí generuje recenzje
3. `review_analyzer.py` ‚Üí analizuje ka≈ºdƒÖ recenzjƒô
4. `weather_utils.py` ‚Üí analiza najlepszych okres√≥w
5. Wy≈õwietlenie szczeg√≥≈Çowych wynik√≥w z emoji

**Raport PDF**:
1. `main.py` ‚Üí standardowe rekomendacje
2. `chart_generator.py` ‚Üí tworzy wykresy
3. `pdf_report_generator.py` ‚Üí ≈ÇƒÖczy wszystko w PDF
4. Automatyczne otwieranie pliku

## 6. üéØ JAK PRZETESTOWAƒÜ NOWE FUNKCJE

### 6.1 Test Analizy Sentymentu
1. Uruchom: `python main.py`
2. Wybierz opcjƒô **3** (Analiza konkretnej trasy)
3. Wybierz miasto (np. Gda≈Ñsk)
4. Wybierz trasƒô z listy
5. Zobacz szczeg√≥≈ÇowƒÖ analizƒô ka≈ºdej recenzji z emoji!

### 6.2 Test Naprawionego Systemu Wag
1. Uruchom: `python main.py`
2. Wybierz opcjƒô **1** (Standardowe rekomendacje)
3. Wybierz **wszystkie miasta** (ENTER)
4. Ustaw wagi JEDEN RAZ na poczƒÖtku
5. System nie bƒôdzie ju≈º pyta≈Ç o wagi dla ka≈ºdego miasta!

### 6.3 Test Raportu PDF
1. Uruchom: `python main.py`
2. Wybierz opcjƒô **2** (Rekomendacje z PDF)
3. Podaj nazwƒô raportu lub ENTER
4. Zobacz poprawnie wy≈õwietlone oceny (bez prostokƒÖt√≥w)
5. Raport automatycznie siƒô otworzy

### 6.4 Test Przetwarzania Tekstu
1. Uruchom: `python main.py`
2. Wybierz opcjƒô **6** (Demonstracja przetwarzania tekstu)
3. Zobacz jak system wydobywa informacje z opis√≥w tras
4. Przyk≈Çady z updatelist.txt w akcji!

## 7. üîç ROZWIƒÑZYWANIE PROBLEM√ìW

### 7.1 Czƒôste Problemy i RozwiƒÖzania

**Problem**: "Qt error" przy wykresach
**RozwiƒÖzanie**: Dodano `matplotlib.use('Agg')` w chart_generator.py

**Problem**: Polskie znaki w PDF
**RozwiƒÖzanie**: U≈ºywamy font√≥w Arial, Calibri, DejaVu Sans

**Problem**: Niesko≈Ñczona pƒôtla wag
**RozwiƒÖzanie**: Naprawiono obs≈Çugƒô pustych warto≈õci w weight_calculator.py

**Problem**: Brak danych pogodowych
**RozwiƒÖzanie**: System u≈ºywa weather_dataa.json z prawdziwymi danymi

### 7.2 Logi i Debugowanie
- Wszystkie b≈Çƒôdy sƒÖ logowane do konsoli
- ReviewAnalyzer loguje statystyki analizy
- System pokazuje postƒôp operacji
- Fallback na domy≈õlne warto≈õci przy b≈Çƒôdach

## 8. üöÄ PRZYSZ≈ÅE ROZSZERZENIA (updatelist2.txt)

System jest przygotowany na **Etap 4: Integracja z BazƒÖ Danych**:
- Migracja z CSV/JSON do SQLite
- Repozytoria danych (RouteRepository, WeatherRepository)
- Backup i restore bazy danych
- Nowe opcje menu administracyjnego

Wszystkie obecne funkcjonalno≈õci bƒôdƒÖ zachowane i rozszerzone o obs≈Çugƒô bazy danych.

